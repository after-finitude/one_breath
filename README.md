# One Breath

A minimalist daily thought journaling app for capturing one meaningful thought per day. The app now runs entirely in the browser, which makes static hosting (including GitHub Pages) straightforward.

## Features

- **Daily journaling**: Capture a single thought each day and update it as needed.
- **Browser persistence**: Entries are stored locally using the browser’s storage, so no server or database setup is required.
- **History view**: Browse your archive with paging, quick previews, and keyboard support.
- **Export**: Download monthly exports in `.txt` or `.md` format.
- **Multilingual**: Ships with English and Russian translations.
- **Responsive design**: Works seamlessly on phones, tablets, and desktops.

## Tech Stack

- **Runtime & bundler**: [Bun](https://bun.sh) – fast installs, TypeScript support, and a great build pipeline.
- **UI**: [Preact](https://preactjs.com/) with functional components and hooks.
- **Routing**: [wouter-preact](https://github.com/molefrog/wouter) for lightweight client-side routing.
- **Styling**: [Tailwind CSS v4](https://tailwindcss.com/) compiled with PostCSS.
- **Persistence**: Browser `localStorage` (with graceful fallbacks for non-persistent environments).
- **Code quality**: [Biome](https://biomejs.dev/) for linting and formatting, plus Bun’s built-in test runner.

## Getting Started

### Prerequisites

- [Bun](https://bun.sh) v1.3.0 or later

### Installation

```bash
bun install
```

### Development

```bash
bun run dev
```

The command builds the static assets and serves them at `http://localhost:4173`. Keep the preview server running and execute `bun run build` in another terminal whenever you need to rebuild after code changes.

### Building

```bash
bun run build
```

Static assets are emitted to the `docs/` directory (`docs/index.html`, `docs/assets/...`). Commit these files when deploying to GitHub Pages.

### Previewing the Production Build

```bash
bun run preview
```

Serves the already-built `docs/` directory without rebuilding it.

## Project Structure

```
/
├── docs/                 # GitHub Pages output (generated by `bun run build`)
│   └── assets/           # Compiled JS/CSS bundle
├── scripts/              # Build and preview helpers (Bun scripts)
│   ├── build-static.ts   # Compiles the Preact app + Tailwind CSS into docs/
│   └── preview.ts        # Lightweight static server for docs/
├── src/                  # Application source
│   ├── app/              # App shell and layout components
│   ├── components/       # Reusable UI components
│   ├── context/          # React-style context providers
│   ├── hooks/            # Custom hooks (entries, translation, etc.)
│   ├── lib/
│   │   └── storage/      # Browser storage implementation
│   ├── pages/            # Feature pages (Today, History, Export)
│   ├── router/           # Wouter router configuration
│   ├── styles/           # Tailwind entry point
│   └── types/            # Shared TypeScript types
├── tests/                # Unit and integration tests (Bun test runner)
├── future-roadmap.md     # Project notes and long-term ideas
├── index.html            # HTML template copied to docs/ during build
└── package.json
```

## Testing & Quality

```bash
# TypeScript + Biome
bun run check

# Unit tests
bun test
```

Biome is also available directly if you prefer manual control:

```bash
bunx biome check --write .
```

## Deployment

### GitHub Pages

1. Build the static site:
   ```bash
   bun run build
   ```
2. Commit the updated `docs/` directory (including `docs/assets/` and `.nojekyll`).
3. Push to GitHub.
4. In your repository settings, open **Pages** and choose:
   - **Source**: “Deploy from a branch”
   - **Branch**: the branch you push to (e.g. `master`)
   - **Folder**: `/docs`
5. Save. GitHub Pages will publish the site at `https://<username>.github.io/<repo>/`.

Because all asset URLs are relative (`./assets/...`), the site works regardless of the repository name.

### Automating Deployments (optional)

If you prefer automation, extend your CI workflow to run `bun run build` and commit or upload the `docs/` artifacts to the `gh-pages` branch. GitHub’s official “deploy-pages” action works well with the static output produced by the build script.

## Continuous Integration

`.github/workflows/ci.yml` performs the typical bun/Biome/test pipeline:

- Installs dependencies with `bun install --ci`
- Runs `bun run check`
- Executes `bun test`
- Builds the static site via `bun run build`

Customize or extend this workflow to publish the built `docs/` directory if you want automated GitHub Pages deployments.

## Editor Setup (VS Code)

```json
{
  "editor.defaultFormatter": "biomejs.biome",
  "editor.formatOnSave": true,
  "[javascript]": { "editor.defaultFormatter": "biomejs.biome" },
  "[typescript]": { "editor.defaultFormatter": "biomejs.biome" },
  "[javascriptreact]": { "editor.defaultFormatter": "biomejs.biome" },
  "[typescriptreact]": { "editor.defaultFormatter": "biomejs.biome" }
}
```

## Architecture Notes

- **Why Preact?** React compatibility with a ~3 KB footprint keeps the bundle tiny.
- **Why Wouter?** Minimal routing API, no extra runtime costs.
- **Why Bun?** Unified runtime, bundler, test runner, and package manager with excellent TypeScript support.
- **Why Biome?** A single, fast formatter + linter that keeps the codebase consistent.
- **Why browser storage?** GitHub Pages and other static hosts don’t provide a server runtime. Persisting to `localStorage` keeps the experience instant and private to the device.

## Contributing

This is a personal project, but ideas and improvement suggestions are always welcome.

## License

MIT
